webpackJsonp([4,0],{0:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var i=a(17),n=s(i),r=a(59),o=s(r),l=a(136),c=s(l);a(77);var d=a(607),u=s(d);n.default.use(o.default),n.default.use(c.default),new n.default({el:"#app",template:"<AataAnalysis/>",components:{AataAnalysis:u.default}})},61:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(17),n=s(i),r=a(59),o=s(r);n.default.use(o.default),n.default.http.interceptors.push(function(e,t){t(function(e){var t=e.body;t&&1==t.idsIntercepted&&(this.$message({type:"warning",message:"授权信息过期，请重新登录！"}),setTimeout(function(){location.host.indexOf("dev")>=0||location.host.indexOf("sit")>=0?window.location="//sfsit.cnsuning.com/nsfuaa-admin/home.htm":location.host.indexOf("pre")>=0?window.location="//sfpre.cnsuning.com/nsfuaa-admin/home.htm":window.location="//sf.cnsuning.com/nsfuaa-admin/home.htm"},2e3))})});var l={dateToString:function(e){if(!e)return"";e=new Date(e);var t=e.getFullYear(),a=parseInt(e.getMonth()+1,10),s=a<10?"0"+a:a,i=e.getDate(),n=i<10?"0"+i:i;return t+"-"+s+"-"+n},dateToString2:function(e){if(!e)return"";e=new Date(e);var t=e.getFullYear(),a=parseInt(e.getMonth()+1,10),s=a<10?"0"+a:a,i=e.getDate(),n=i<10?"0"+i:i;return t+s+n},getBrowserInfo:function(){var e={},t=navigator.userAgent.toLowerCase(),a=/(msie|firefox|chrome|opera|version).*?([\d.]+)/,s=t.match(a);return e.browser=s[1].replace(/version/,"'safari"),e.ver=s[2],e},getUrlArgs:function(){for(var e=location.search.substring(1),t=e.split("&"),a={},s=void 0,i=void 0,n=void 0,r=void 0,o=0;o<t.length;o++)s=t[o],i=s.indexOf("="),i!=-1&&(n=s.substring(0,i),r=decodeURIComponent(s.substring(i+1)),a[n]=r);return a},$ajax:function(e,t,a){if(!t)return void e.$message.error("接口请求参数错误");var s=t.params?t.params:{},i=t.type?t.type:"get";"get"==i?e.$http.get(t.url,{params:s}).then(function(e){a(e)},function(t){e.$message.error("接口调用失败")}):e.$http.post(t.url,s).then(function(e){a(e)},function(t){e.$message.error("接口调用失败")})},sa:function(){function e(e){for(var t=e,a=document.getElementsByTagName("script"),s=0;s<a.length;s++)if(a[s].src==t)return;var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=t;var n=a[0];n.parentNode.insertBefore(i,n)}function t(e){var t=document.location.hostname,a=".suning.com",s="pre.cnsuning.com",i="sit.cnsuning.com",n="";return n=t.indexOf(a)!=-1?"//res.suning.cn":t.indexOf(s)!=-1?"//resprexg.suning.cn/project":t.indexOf(i)!=-1?"//sitres.suning.cn":"//res.suning.cn",n=n+"/javascript/sn_da/"+e}e(t("sa_simple.js"))},dateTranfer:function(e){var t=new Date(e),a=t.getFullYear()+"-"+parseInt(t.getMonth()+1)+"-"+parseInt(t.getDate()),s=a.split("-");return s[1]=s[1]>10?s[1]:"0"+s[1],s[2]=s[2]>10?s[2]:"0"+s[2],a},transferDate:function(e,t){if(e){var a=new Date(e),s=a.getFullYear()+"-"+(parseInt(a.getMonth()+1)>=10?parseInt(a.getMonth()+1):"0"+parseInt(a.getMonth()+1))+"-"+(a.getDate()>=10?a.getDate():"0"+a.getDate());return s+=1==t?" 00:00:00":" 23:59:59"}return""}};t.default=l},62:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/nsfdas-web/",s="/sntk-admin/",i={getAuthInfo:a+"getAuthInfo.htm",queryAllDistrictOrg:a+"o2OGuide/queryAllDistrictOrg.htm",queryAllSaleOrgByDistrictCode:a+"o2OGuide/queryAllSaleOrgByDistrictCode.htm",queryAllSitesBySaleOrg:a+"o2OGuide/queryAllSitesBySaleOrg.htm",queryGuideServiceTotal:a+"o2OGuide/queryGuideServiceTotal.htm",queryGuideSaleTotal:a+"o2OGuide/queryGuideSaleTotal.htm",queryGuideTrendStatis:a+"o2OGuide/queryGuideTrendStatis.htm",queryGuideAnalysisData:a+"o2OGuide/queryGuideAnalysisData.htm",queryGuideCmmdtyAnalysis:a+"o2OGuide/queryGuideCmmdtyAnalysis.htm",searchSessionList:a+"o2OGuide/queryGuideSessionList.htm",sessionDetailList:a+"o2OGuide/queryGuideSessionDetail.htm",districtOrgList:a+"o2OGuide/queryAllDistrictOrg.htm",saleOrgList:a+"o2OGuide/queryAllSaleOrgByDistrictCode.htm",sitetList:a+"o2OGuide/queryAllSitesBySaleOrg.htm",authInfo:a+"getAuthInfo.htm",queryUserInfo:s+"admin/organization/queryUserInfo.do",queryBranchList:s+"admin/organization/queryBranchList.do",queryStoreList:s+"admin/organization/queryStoreList.do",queryRegionList:s+"admin/organization/queryRegionList.do",queryStationList:s+"admin/organization/queryStationList.do",queryStaffInfoPage:s+"admin/staffManage/queryStaffInfoPage.do",queryEmployExt:s+"admin/staffManage/queryEmployExt.do",addStaffInfo:s+"admin/staffManage/addStaffInfo.do",queryStation:s+"admin/staffManage/queryStation.do",addStaffInfoByOrgPos:s+"admin/staffManage/addStaffInfoByOrgPos.do",modifyStaffStatus:s+"admin/staffManage/modifyStaffStatus.do",deleteStaffInfo:s+"admin/staffManage/deleteStaffInfo.do"};t.default=i},77:function(e,t){},153:function(e,t){},277:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(61),n=s(i),r=a(62),o=s(r),l=a(317),c=s(l);t.default={data:function(){return{showTwoPie:!1,activeName:"first",tabIndex:0,options:[{value:1,label:"实时数据"},{value:2,label:"历史数据"}],numValue:1,authKey:"",comparisonDate:"",timeInterval:[],contrastPeriod:[],tempDay:7,area:"",branch:"",store:"",orgLevelCode:2,areaList:[{districtCode:"",districtName:"全部大区"}],branchList:[{saleOrgCode:"",saleOrgName:"全部分公司"}],storeList:[{siteCode:"",siteName:"全部门店"}],panelList:[],selectIdx:0,pickerOptionsDay:{disabledDate:function(e){return e.getTime()+864e5>Date.now()}},pickerOptions:{disabledDate:function(e){return e.getTime()+864e5>Date.now()},shortcuts:[{text:"最近7天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近15天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-1296e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近30天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}}]},pickerOptionsNext:{disabledDate:function(e){return e.getTime()+864e5>Date.now()}},radio:1,barShow:!1,pieShow:!1,lineEcharts:null,pieEcharts:null,barEcharts:null,analysisType:"",analysisList:[],buCode:"all",pageNo:1,pageSize:5,total:0,menuList:[{name:"全部品类",code:"all"},{name:"空调",code:"00001"},{name:"冰洗",code:"00002"},{name:"黑电",code:"00003"},{name:"数码",code:"00004"},{name:"电脑",code:"00005"},{name:"通讯",code:"00006"},{name:"小家电",code:"00007"},{name:"厨卫",code:"00013"}],dialogShow:!1,searchOff:!1,unitName:"",panelData:null}},computed:{nowDate:function(){var e=new Date,t="-",a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();s>=1&&s<=9&&(s="0"+s),i>=0&&i<=9&&(i="0"+i);var n=a+t+s+t+i;return n},oldDate:function e(){var t=new Date;t.setTime(t.getTime()-864e5);var a="-",s=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();i>=1&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n);var e=s+a+i+a+n;return e},tableList:function(){var e=this,t=(this.pageNo-1)*this.pageSize,a=this.pageNo*this.pageSize,s=[];return"all"==this.buCode?(this.total=this.analysisList.length,s=this.analysisList.slice(t,a)):(s=this.analysisList.filter(function(t){return t.buCode==e.buCode}),this.total=s.length,s=s.slice(t,a)),s}},filters:{unit:function(e){return e&&e.indexOf("人数")>-1||e&&e.indexOf("员数")>-1?"人":""}},methods:{secondToDate:function(e){var t=Math.floor(e/3600),a=Math.floor(e/60%60),s=Math.floor(e%60);return 0==t&&0==a?s+"秒":0==t?a+"分"+s+"秒":t+"时"+a+"分"+s+"秒"},getDays:function(e,t){e=new Date(e),t=new Date(t);var a=Math.abs(e-t);return Math.floor(a/864e5)},getDateStr:function(e,t){if(!e)return"";t=parseInt(t),e=new Date(e),e.setDate(e.getDate()+t);var a=e.getFullYear(),s=parseInt(e.getMonth()+1,10),i=s<10?"0"+s:s,n=e.getDate(),r=n<10?"0"+n:n;return a+"-"+i+"-"+r},handleClick:function(e,t){0==e.index?(this.init(),this.tabIndex=0):1==e.index&&(this.init(),this.tabIndex=1),this.searchList()},changeTimeInterval:function(){var e=this.timeInterval[0],t=this.timeInterval[1],a=this.getDays(e,t);this.tempDay=a,this.contrastPeriod=[],e=this.getDateStr(e,"-"+(a+1)),t=this.getDateStr(t,"-"+(a+1)),this.contrastPeriod.push(e),this.contrastPeriod.push(t),this.searchOff=!1,this.searchList()},changeContrastPeriod:function(){var e=this.contrastPeriod[0],t=this.contrastPeriod[1],a=this.getDays(e,t);this.tempDay!=a?(this.searchOff=!0,this.$message({type:"warning",message:"对比时间跨度与当前时间跨度不一致！"})):this.searchOff=!1,this.searchList()},getAuthInfo:function(){var e=this;this.$http.get(o.default.getAuthInfo,{params:{authKey:this.authKey}}).then(function(t){var a=t.data;0==a.status?(e.getAreaList(),a.areaCode&&(e.area=a.areaCode),e.authInfo=a,e.orgLevelCode=a.orgLevelCode,4==a.orgLevelCode?(e.branch=a.financialCode,e.store=a.storeCode,e.getBranchList(),e.getStoreList()):1!=a.orgLevelCode&&2!=a.orgLevelCode||(a.financialCode&&(e.branch=a.financialCode),e.getBranchList()),setTimeout(function(){e.searchList()},0)):a.message&&e.$message({type:"warning",message:a.message})},function(t){e.$message.error("接口调用失败")})},getAreaList:function(){var e=this;this.$http.get(o.default.queryAllDistrictOrg,{}).then(function(t){var a=t.data;if(0==a.status){var s=[{districtCode:"",districtName:"全部大区"}];e.areaList=s.concat(a.districtOrgList),""!=e.area?e.getBranchList():(e.branchList.splice(1,e.branchList.length),e.storeList.splice(1,e.storeList.length)),e.branch="",e.store="",e.searchList()}else a.message&&e.$message({type:"warning",message:a.message})},function(t){e.$message.error("接口调用失败")})},getBranchList:function(){var e=this;""!=this.area&&this.$http.get(o.default.queryAllSaleOrgByDistrictCode,{params:{districtCode:this.area}}).then(function(t){var a=t.data;if(0==a.status){var s=[{saleOrgCode:"",saleOrgName:"全部分公司"}];e.branchList=s.concat(a.saleOrgDtoList),1!=e.orgLevelCode&&4!=e.orgLevelCode||e.authInfo.financialCode&&(e.branch=e.authInfo.financialCode),e.store="",""!=e.branch?e.getStoreList():e.storeList.splice(1,e.storeList.length),e.searchList()}else a.message&&e.$message({type:"warning",message:a.message})},function(t){e.$message.error("接口调用失败")})},getStoreList:function(){var e=this;""!=this.branch&&this.$http.get(o.default.queryAllSitesBySaleOrg,{params:{saleOrgCode:this.branch}}).then(function(t){var a=t.data;if(0==a.status){var s=[{siteCode:"",siteName:"全部门店"}];e.storeList=s.concat(a.siteInfoDtoList),4==e.orgLevelCode&&e.authInfo.storeCode&&(e.store=e.authInfo.storeCode),e.searchList()}else a.message&&e.$message({type:"warning",message:a.message})},function(t){e.$message.error("接口调用失败")})},compare:function(e,t){return e.key<t.key?-1:e.key>t.key?1:0},objectToArray:function(e){var t=[],a=[],s={};for(var i in e)t.push({key:i,value:e[i]});return t.sort(this.compare),t.forEach(function(e,t){t%5==0&&(s={},s.val=e.value),t%5==1&&(s.comp=e.value),t%5==2&&(s.percent=e.value),t%5==3&&(s.title=e.value),t%5==4&&(s.unit=e.value,a.push(s))}),0==this.tabIndex?a.forEach(function(e,t){e.type="serv_"+(t+1)}):1==this.tabIndex&&a.forEach(function(e,t){e.type="sale_"+(t+1)}),a=a.filter(function(e){return null!=e.val})},searchServerList:function(e){var t=this;this.$http.get(o.default.queryGuideServiceTotal,{params:e}).then(function(e){var a=e.data;"0"==a.responseCode?(t.panelList=t.objectToArray(a.responseObject),t.selectPanel(t.panelList[t.selectIdx],t.selectIdx)):a.responseMessage&&t.$message({type:"warning",message:a.responseMessage})},function(e){t.$message.error("接口调用失败")})},searchSaleList:function(e){var t=this;this.$http.get(o.default.queryGuideSaleTotal,{params:e}).then(function(e){var a=e.data;0==a.responseCode?(t.panelList=t.objectToArray(a.responseObject),t.selectPanel(t.panelList[t.selectIdx],t.selectIdx)):a.responseMessage&&t.$message({type:"warning",message:a.responseMessage})},function(e){t.$message.error("接口调用失败")})},searchList:function(){if(!this.searchOff||2!=this.numValue){var e={};1==this.numValue?e={areaCode:this.area,branchCode:this.branch,storeCode:this.store,queryType:this.numValue,queryBeginTime:n.default.dateToString2(this.nowDate),queryEndTime:n.default.dateToString2(this.nowDate),compareBeginTime:n.default.dateToString2(this.comparisonDate),compareEndTime:n.default.dateToString2(this.comparisonDate)}:2==this.numValue&&(e={areaCode:this.area,branchCode:this.branch,storeCode:this.store,queryType:this.numValue,queryBeginTime:n.default.dateToString2(this.timeInterval[0]),queryEndTime:n.default.dateToString2(this.timeInterval[1]),compareBeginTime:n.default.dateToString2(this.contrastPeriod[0]),compareEndTime:n.default.dateToString2(this.contrastPeriod[1])}),0==this.tabIndex?this.searchServerList(e):1==this.tabIndex&&this.searchSaleList(e)}},initLineEcharts:function(e,t){var a=this,s={title:{show:!0,left:"24px",text:"趋势图",textStyle:{fontStyle:"normal",fontWeight:"bold",fontFamily:"微软雅黑",fontSize:16}},tooltip:{trigger:"axis",formatter:function(e){for(var s="",i=0;i<e.length;i++){var n=e[i].data.value+t;"秒"==t&&(n=a.secondToDate(e[i].data.value)),s+='<p style="padding:3px 5px;">'+e[i].marker+e[i].seriesName+"："+e[i].data.date+"&nbsp;&nbsp;"+n+"</p>"}return s}},legend:{show:!0,top:"20px",textStyle:{fontWeight:400,fontSize:14,color:"#333333"},formatter:function(e){return"今天"==e&&1==a.numValue?e=e+"："+a.nowDate:"对比"==e&&1==a.numValue?e=e+"："+n.default.dateToString(a.comparisonDate):"本期"==e&&2==a.numValue?e=e+"："+n.default.dateToString(a.timeInterval[0])+"至"+n.default.dateToString(a.timeInterval[1]):"对比"==e&&2==a.numValue&&(e=e+"："+n.default.dateToString(a.contrastPeriod[0])+"至"+n.default.dateToString(a.contrastPeriod[1])),e}},grid:{left:"5%",right:"4%",bottom:"15%",containLabel:!1},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!0},data:e.date},yAxis:{type:"value",minInterval:1,splitLine:{show:!0}},series:[{name:1==a.numValue?"今天":"本期",type:"line",itemStyle:{normal:{color:"#15B374"}},data:e.currentData},{name:"对比",type:"line",itemStyle:{normal:{}},data:e.compareData}]};this.lineEcharts=c.default.init(this.$refs.lineEcharts),this.lineEcharts.resize(),this.lineEcharts.setOption(s)},initBarEcharts:function(e,t){var a={title:{show:!1},tooltip:{trigger:"axis",formatter:"{c}"+t},legend:{show:!1},grid:{left:"5%",right:"4%",bottom:"10%",top:"10%",containLabel:!1},xAxis:{type:"category",splitLine:{show:!0},data:e.nameList},yAxis:{type:"value",minInterval:1,splitLine:{show:!0}},series:[{type:"bar",barWidth:30,label:{normal:{show:!0,textStyle:{fontWeight:400,fontSize:16},position:"top"}},itemStyle:{normal:{color:"#15B374",barBorderColor:"#15B374",barBorderWidth:2}},data:e.dataList}]};this.barEcharts=c.default.init(this.$refs.barEcharts),this.barEcharts.resize(),this.barEcharts.setOption(a)},initPieEcharts:function(e,t){var a=[],s=[],i=!1,n=!1;e.forEach(function(e,t){"新买家"==e.name&&(i=!0),"全部会话未回复"==e.name&&(i=!0,n=!0)}),i&&(a=[],s=[],e.forEach(function(e,t){t<2?a.push(e):s.push(e)})),i&&n&&(t="人",a=[],s=[],e.forEach(function(e,t){t<3?a.push(e):s.push(e)}));var r={title:{show:!0,left:"24px",text:"指标分析",textStyle:{fontStyle:"normal",fontWeight:"bold",fontFamily:"微软雅黑",fontSize:16}},tooltip:{trigger:"item",formatter:"{b} : {d}%  {c}"+t},legend:{orient:"vertical",left:"250px",y:"center",selectedMode:!1,textStyle:{fontWeight:400,fontSize:16},formatter:function(a){var s=[],i=0;return e.forEach(function(e,t){i+=parseFloat(e.value)}),e.forEach(function(e,n){var r=0;if(i>0&&(r=parseFloat(e.value)/i*100),e.name==a){var o=a+"："+parseFloat(r).toFixed(2)+"%  "+e.value+t;s.push(o)}}),s}},grid:{left:"5%",right:"4%",bottom:"10%",top:"10%",containLabel:!1},series:[{name:"访问来源",type:"pie",radius:"55%",center:["10%","50%"],data:e,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,position:"inner",textStyle:{fontWeight:400,fontSize:16},formatter:function(e){var t=[];return 0!=e.percent?t.push(e.percent+"%"):t.push(null),t}},labelLine:{show:!1}}}}]},o={title:{show:!0,left:"24px",text:"指标分析",textStyle:{fontStyle:"normal",fontWeight:"bold",fontFamily:"微软雅黑",fontSize:16}},tooltip:{trigger:"item",formatter:"{b} : {d}%  {c}"+t},legend:[{orient:"vertical",left:"250px",y:"center",selectedMode:!1,textStyle:{fontWeight:400,fontSize:16},data:a,formatter:function(e){var s=[],i=0;return a.forEach(function(e,t){i+=parseFloat(e.value)}),a.forEach(function(a,n){var r=0;if(i>0&&(r=parseFloat(a.value)/i*100),a.name==e){var o=e+"："+parseFloat(r).toFixed(2)+"%  "+a.value+t;s.push(o)}}),s}},{orient:"vertical",right:"100px",y:"center",selectedMode:!1,textStyle:{fontWeight:400,fontSize:16},data:s,formatter:function(e){var a=[],i=0;return s.forEach(function(e,t){i+=parseFloat(e.value)}),s.forEach(function(s,n){var r=0;if(i>0&&(r=parseFloat(s.value)/i*100),s.name==e){var o=e+"："+parseFloat(r).toFixed(2)+"%  "+s.value+t;a.push(o)}}),a}}],grid:{left:"5%",right:"4%",bottom:"10%",top:"10%",containLabel:!1},series:[{name:"访问来源",type:"pie",radius:"55%",center:["10%","50%"],data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,position:"inner",textStyle:{fontWeight:400,fontSize:16},formatter:function(e){var t=[];return 0!=e.percent?t.push(e.percent+"%"):t.push(null),t}},labelLine:{show:!1}}}},{name:"访问来源",type:"pie",radius:"55%",center:["55%","50%"],data:s,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,position:"inner",textStyle:{fontWeight:400,fontSize:16},formatter:function(e){var t=[];return 0!=e.percent?t.push(e.percent+"%"):t.push(null),t}},labelLine:{show:!1}}}}]};this.pieEcharts=c.default.init(this.$refs.pieEcharts),this.pieEcharts.resize(),this.pieEcharts.clear(),i?this.pieEcharts.setOption(o):this.pieEcharts.setOption(r)},selectPanel:function(e,t){if(this.searchOff&&2==this.numValue)return void this.$message({type:"warning",message:"对比时间跨度与当前时间跨度不一致！"});var a={};1==this.numValue?a={areaCode:this.area,branchCode:this.branch,storeCode:this.store,analysisType:e.type,queryType:this.numValue,queryBeginTime:n.default.dateToString2(this.nowDate),queryEndTime:n.default.dateToString2(this.nowDate),compareBeginTime:n.default.dateToString2(this.comparisonDate),compareEndTime:n.default.dateToString2(this.comparisonDate)}:2==this.numValue&&(a={areaCode:this.area,branchCode:this.branch,storeCode:this.store,analysisType:e.type,queryType:this.numValue,queryBeginTime:n.default.dateToString2(this.timeInterval[0]),queryEndTime:n.default.dateToString2(this.timeInterval[1]),compareBeginTime:n.default.dateToString2(this.contrastPeriod[0]),compareEndTime:n.default.dateToString2(this.contrastPeriod[1])}),this.selectIdx=t,this.unitName=e.unit,this.analysisType=e.type,this.radio=1,this.panelData=a,this.setPanel()},setPanel:function(){this.pieShow=!1,this.barShow=!1,this.lineEcharts&&this.lineEcharts.clear(),this.pieEcharts&&this.pieEcharts.clear(),this.barEcharts&&this.barEcharts.clear(),this.queryGuideTrendStatis(this.panelData,this.unitName),this.queryGuideAnalysisData(this.panelData,this.unitName),this.queryGuideCmmdtyAnalysis(this.panelData,this.unitName)},queryGuideTrendStatis:function(e,t){var a=this,s=this;this.$http.get(o.default.queryGuideTrendStatis,{params:e}).then(function(e){var i=e.data;if(0==i.responseCode){var n={date:[],currentData:[],compareData:[]};i.responseObject&&i.responseObject.length>0&&(i.responseObject.forEach(function(e,t){1==s.numValue?n.date.push(e.currentDate.slice(11)):2==s.numValue&&n.date.push(e.currentDate.slice(5)),n.currentData.push({value:e.currentData,date:e.currentDate}),n.compareData.push({value:e.compareData,date:e.compareDate})}),a.initLineEcharts(n,t))}else i.responseMessage&&a.$message({type:"warning",message:i.responseMessage})},function(e){a.$message.error("接口调用失败")})},queryGuideAnalysisData:function(e,t){var a=this;this.$http.get(o.default.queryGuideAnalysisData,{params:e}).then(function(e){var s=e.data;if(0==s.responseCode)if(s.responseObject&&s.responseObject.length>0){var i=[];s.responseObject.forEach(function(e,t){i.push({value:e.analysisTotal,name:e.analysisType})}),a.pieShow=!0,setTimeout(function(){a.initPieEcharts(i,t)},0)}else a.pieShow=!1;else s.responseMessage&&a.$message({type:"warning",message:s.responseMessage})},function(e){a.$message.error("接口调用失败")})},queryGuideCmmdtyAnalysis:function(e,t){var a=this;e.buType=this.radio,this.$http.get(o.default.queryGuideCmmdtyAnalysis,{params:e}).then(function(e){var s=e.data;if(0==s.responseCode)if(s.responseObject&&s.responseObject.length>0){var i={nameList:[],dataList:[]},n=[{name:"全部品类",code:"all"}];s.responseObject.forEach(function(e,t){i.nameList.push(e.buName),i.dataList.push(e.analysisData),n.push({name:e.buName,code:e.buCode})}),a.barShow=!0,1==a.radio?(a.analysisList=[],a.total=0,a.pageNo=1,setTimeout(function(){a.initBarEcharts(i,t)},0)):2==a.radio&&(a.pageNo=1,a.analysisList=s.responseObject,a.total=s.responseObject.length)}else 1==a.radio?a.barShow=!1:2==a.radio&&(a.pageNo=1,a.analysisList=s.responseObject,a.total=s.responseObject.length);else s.responseMessage&&a.$message({type:"warning",message:s.responseMessage})},function(e){a.$message.error("接口调用失败")})},changeRadio:function(){var e={};1==this.numValue?e={areaCode:this.area,branchCode:this.branch,storeCode:this.store,analysisType:this.analysisType,queryType:this.numValue,queryBeginTime:n.default.dateToString2(this.nowDate),queryEndTime:n.default.dateToString2(this.nowDate),compareBeginTime:n.default.dateToString2(this.comparisonDate),compareEndTime:n.default.dateToString2(this.comparisonDate)}:2==this.numValue&&(e={areaCode:this.area,branchCode:this.branch,storeCode:this.store,analysisType:this.analysisType,queryType:this.numValue,queryBeginTime:n.default.dateToString2(this.timeInterval[0]),queryEndTime:n.default.dateToString2(this.timeInterval[1]),compareBeginTime:n.default.dateToString2(this.contrastPeriod[0]),compareEndTime:n.default.dateToString2(this.contrastPeriod[1])}),this.queryGuideCmmdtyAnalysis(e,this.unitName)},changeList:function(){this.pageNo=1},jumpPage:function(e){this.pageNo=e},changeInit:function(){this.init(),""!=this.timeInterval&&""!=this.contrastPeriod&&this.searchList()},init:function(){this.comparisonDate=this.getDateStr(this.nowDate,-1),this.panelList=[],this.selectIdx=0,this.pieShow=!1,this.barShow=!1,this.lineEcharts&&this.lineEcharts.clear(),this.pieEcharts&&this.pieEcharts.clear(),this.barEcharts&&this.barEcharts.clear()}},mounted:function(){var e=n.default.getUrlArgs();this.authKey=e.authKey,this.comparisonDate=this.getDateStr(this.nowDate,-1),this.timeInterval.push(this.getDateStr(this.oldDate,-6)),this.timeInterval.push(this.oldDate),this.contrastPeriod.push(this.getDateStr(this.oldDate,-13)),this.contrastPeriod.push(this.getDateStr(this.oldDate,-7)),this.getAuthInfo()}}},598:function(e,t){},607:function(e,t,a){var s,i;a(598),s=a(277);var n=a(611);i=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(i=s=s.default),"function"==typeof i&&(i=i.options),i.render=n.render,i.staticRenderFns=n.staticRenderFns,e.exports=s},611:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"idx-main"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"服务分析",name:"first"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"销售分析",name:"second"}})],1),e._v(" "),a("div",{staticClass:"search-box"},[a("div",{staticClass:"row-box"},[a("div",{staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("数据：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeInit},model:{value:e.numValue,callback:function(t){e.numValue=t},expression:"numValue"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.numValue,expression:"numValue == 1"}],staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("当前日期：")]),e._v(" "),a("span",[e._v(e._s(e.nowDate))])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.numValue,expression:"numValue == 1"}],staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("对比日期：")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptionsDay},on:{change:e.searchList},model:{value:e.comparisonDate,callback:function(t){e.comparisonDate=t},expression:"comparisonDate"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.numValue,expression:"numValue == 2"}],staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("时段：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.changeTimeInterval},model:{value:e.timeInterval,callback:function(t){e.timeInterval=t},expression:"timeInterval"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.numValue,expression:"numValue == 2"}],staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("对比日期：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptionsDay},on:{change:e.changeContrastPeriod},model:{value:e.contrastPeriod,callback:function(t){e.contrastPeriod=t},expression:"contrastPeriod"}})],1)]),e._v(" "),a("div",{staticClass:"row-box"},[a("div",{staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("大区：")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:1==e.orgLevelCode||2==e.orgLevelCode||4==e.orgLevelCode},on:{change:e.getAreaList},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.areaList,function(e){return a("el-option",{key:e.districtCode,attrs:{label:e.districtName,value:e.districtCode}})}))],1),e._v(" "),a("div",{staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("分公司：")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:1==e.orgLevelCode||4==e.orgLevelCode},on:{change:e.getBranchList},model:{value:e.branch,callback:function(t){e.branch=t},expression:"branch"}},e._l(e.branchList,function(e){return a("el-option",{key:e.saleOrgCode,attrs:{label:e.saleOrgName,value:e.saleOrgCode}})}))],1),e._v(" "),a("div",{staticClass:"col-box"},[a("span",{staticClass:"lab"},[e._v("门店：")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:4==e.orgLevelCode},on:{change:e.searchList},model:{value:e.store,callback:function(t){e.store=t},expression:"store"}},e._l(e.storeList,function(e){return a("el-option",{key:e.siteCode,attrs:{label:e.siteName,value:e.siteCode}})}))],1),e._v(" "),a("div",{staticClass:"col-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("查询")])],1),e._v(" "),a("a",{staticClass:"read",on:{click:function(t){e.dialogShow=!0}}},[a("span",[e._v("参数解读")]),e._v(" "),a("i",{staticClass:"el-icon-question"})])])]),e._v(" "),a("div",{staticClass:"panel-box"},e._l(e.panelList,function(t,s){return a("div",{staticClass:"grid-content bg-g",class:{active:s==e.selectIdx},on:{click:function(a){e.selectPanel(t,s)}}},[a("div",{staticClass:"name"},[e._v(e._s(t.title))]),e._v(" "),a("div",{staticClass:"number"},["秒"==t.unit?[a("span",[e._v(e._s(e.secondToDate(t.val)))])]:[a("span",[e._v(e._s(t.val))]),e._v(e._s(t.unit))]],2),e._v(" "),a("div",{staticClass:"info-item"},[a("span",[e._v("对比：")]),e._v(" "),"秒"==t.unit?a("span",[e._v(e._s(e.secondToDate(t.comp)))]):a("span",[e._v(e._s(t.comp)+e._s(t.unit))])]),e._v(" "),a("div",{staticClass:"info-item"},[a("span",[e._v("同比：")]),e._v(" "),a("span",[e._v(e._s(t.percent))])])])})),e._v(" "),a("div",{ref:"lineEcharts",staticClass:"echarts-box"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.barShow,expression:"barShow"}],staticClass:"bar-box"},[a("h3",[e._v("商品分析")]),e._v(" "),a("div",{staticClass:"search-box"},[a("div",{staticClass:"row-box "},[a("div",{staticClass:"col-box"},[a("el-radio",{attrs:{label:1},on:{change:e.changeRadio},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("品类")]),e._v(" "),a("el-radio",{attrs:{label:2},on:{change:e.changeRadio},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("品牌")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.radio,expression:"radio == 2"}],staticClass:"col-box"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeList},model:{value:e.buCode,callback:function(t){e.buCode=t},expression:"buCode"}},e._l(e.menuList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.radio,expression:"radio == 1"}],ref:"barEcharts",staticClass:"echarts-box"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.radio,expression:"radio == 2"}],staticClass:"table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList,border:""}},[a("el-table-column",{attrs:{prop:"brandName",label:"品牌名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"analysisData",label:"指标数据"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"占比"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.ratio)+"%\n                    ")]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!=e.total,expression:"total != 0"}],attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNo,total:e.total},on:{"current-change":e.jumpPage}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pieShow,expression:"pieShow"}],ref:"pieEcharts",staticClass:"echarts-box ht300"}),e._v(" "),a("el-dialog",{staticClass:"info-box",attrs:{title:"参数解读",visible:e.dialogShow,width:"580px"},on:{"update:visible":function(t){e.dialogShow=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tabIndex,expression:"tabIndex == 0"}],staticClass:"list"},[a("dl",[a("dt",[e._v("首次咨询人数")]),e._v(" "),a("dd",[e._v("自功能上线起，与店员建立过单向会话关系的顾客数")])]),e._v(" "),a("dl",[a("dt",[e._v("复聊人数")]),e._v(" "),a("dd",[e._v("双方建立会话关系后，3天内再次咨询导购的顾客数")])]),e._v(" "),a("dl",[a("dt",[e._v("首条响应时间")]),e._v(" "),a("dd",[e._v("店员收到消息后，首次回复顾客所用的时间，单条消息的响应消息最长为24小时，会话解除后，未回复的消息不纳入计算")])]),e._v(" "),a("dl",[a("dt",[e._v("平均回复率")]),e._v(" "),a("dd",[e._v("店员回复会话数（每个会话算一次）占总会话的比例")])]),e._v(" "),a("dl",[a("dt",[e._v("评价分数")]),e._v(" "),a("dd",[e._v("店员所获得评价分数的平均值")])]),e._v(" "),a("dl",[a("dt",[e._v("在线店员数")]),e._v(" "),a("dd",[e._v("当前状态为在线状态的店员数量")])]),e._v(" "),a("dl",[a("dt",[e._v("被咨询店员数")]),e._v(" "),a("dd",[e._v("与顾客建立单向会话关系的店员数")])]),e._v(" "),a("dl",[a("dt",[e._v("提供服务店员数")]),e._v(" "),a("dd",[e._v("与顾客建立双向会话关系的店员数")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabIndex,expression:"tabIndex == 1"}],staticClass:"list"},[a("dl",[a("dt",[e._v("发券数")]),e._v(" "),a("dd",[e._v("店员发放优惠券的总数")])]),e._v(" "),a("dl",[a("dt",[e._v("用券数")]),e._v(" "),a("dd",[e._v("顾客使用优惠券的总数")])]),e._v(" "),a("dl",[a("dt",[e._v("发券金额")]),e._v(" "),a("dd",[e._v("顾客发放优惠券的总金额")])]),e._v(" "),a("dl",[a("dt",[e._v("用券金额")]),e._v(" "),a("dd",[e._v("顾客使用优惠券的总金额")])]),e._v(" "),a("dl",[a("dt",[e._v("ROI")]),e._v(" "),a("dd",[e._v("投资回报率，销售金额/用券金额 x 100%")])]),e._v(" "),a("dl",[a("dt",[e._v("买家数")]),e._v(" "),a("dd",[e._v("双方建立会话后，在微服务中产生购买行为的用户数")])]),e._v(" "),a("dl",[a("dt",[e._v("买家转化率")]),e._v(" "),a("dd",[e._v("微服务中买家数占咨询总人数的比例")])]),e._v(" "),a("dl",[a("dt",[e._v("订单数")]),e._v(" "),a("dd",[e._v("微服务中产生的订单总数")])]),e._v(" "),a("dl",[a("dt",[e._v("销售金额")]),e._v(" "),a("dd",[e._v("微服务中产生的销售总金额")])]),e._v(" "),a("dl",[a("dt",[e._v("客单价")]),e._v(" "),a("dd",[e._v("销售金额/订单数*100%")])])])])],1)},staticRenderFns:[]}}});