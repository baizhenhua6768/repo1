webpackJsonp([4],{AXYi:function(e,t,o){e.exports=o.p+"static/vgo/img/status_book_welcome@2x.450e6a3.png"},Y3PN:function(e,t,o){e.exports=o.p+"static/vgo/img/status_book_complete@2x.08fc746.png"},fweY:function(e,t,o){e.exports=o.p+"static/vgo/img/status_book_wait@2x.72851aa.png"},oY0A:function(e,t){},s7HD:function(e,t,o){"use strict";function a(e){o("oY0A")}Object.defineProperty(t,"__esModule",{value:!0});var s=o("7+uW"),r=o("Xxa5"),n=o.n(r),i=o("exGp"),d=o.n(i),u=o("r1Vi"),p=o("g5qz"),g=o("ZpX4"),c=o("AU0D"),l=o("+L+0"),m=o("3igB"),h=o("KgXo"),f={name:"App",data:function(){return{headerConfig:{topType:"2",title:"预约详情",showTips:!0,tipsText:"您好，我通常10点-22点在线，非在线时间您可以给我留言",operateConfig:["refresh",{share:{title:"分享的标题",content:"分享的内容",targetUrl:"目标跳转url",iconUrl:"分享图片url",shareWays:"1,2,3,4,5"}}]},msg:"是否取消预约?",bookCode:"",appointmentInfo:{},guideOrderLog:[{orderStatus:""}],bookingWord:"",bookingWordInfo:"",tipTextBackground:"",guideId:"",cityId:"",isYunxin:"0",channel:"",chid:"",showPage:!1}},components:{headerTop:u.a,prompt:g.a,toast:c.a,errorPage:m.a,load:h.a},methods:{share:function(e){var t=location.href.split("?")[0],o=t.indexOf("vgo"),a=t.substring(0,o+3);1==this.modelType||0==this.modelType?this.headerConfig.operateConfig[1].share={title:"推荐,我的专属导购"+e.name,content:"我在"+e.storeName+"享受专属导购的一对一专属服务。一次非常棒的购物体验…",targetUrl:a+"/salesManInfo.html?guideId="+this.appointmentInfo.guideId+"&channel=37",iconUrl:""+e.iconUrl,shareWays:"1,2"}:2==this.modelType&&p.a.getWxConfig({title:"推荐,我的专属导购"+e.name,desc:"我在"+e.storeName+"享受专属导购的一对一专属服务。一次非常棒的购物体验…",link:a+"/salesManInfo.html?guideId="+this.appointmentInfo.guideId+"&channel=37",imgUrl:""+e.iconUrl})},goToYunxin:function(){p.a.goToYunxin(this.appointmentInfo.guideId,this.appointmentInfo.guideName,this.appointmentInfo.guidePhoto,this.appointmentInfo.storeName)},goToAppointmentStore:function(){location.href="appointmentStore.html?guideId="+this.appointmentInfo.guideId+"&isYunxin=0"},cancelAppointmentPrompt:function(){this.$refs.prompt.show()},confirmPrompt:function(){var e=this;return d()(n.a.mark(function t(){var o,a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=l.a.cancelAppointment,a={bookCode:e.bookCode},e.$refs.load&&e.$refs.load.showToggle(),t.next=6,p.a.ajax({url:o,data:a,type:"get",dataType:"json",timeout:"10000"});case 6:s=t.sent,e.$refs.load&&e.$refs.load.hideToggle(),s.success?(e.queryGuideOrderLog(),e.$refs.toast.autoHide("取消成功","1"),1==e.isYunxin&&(p.a.invokeYunXin(13,e.appointmentInfo.bookingTime),setTimeout(function(){p.a.goBack()},2e3))):"6005"==s.errorCode?p.a.h5Toast("今天取消次数已达到上限，请明天再试",e):e.$refs.toast.autoHide("取消失败","2"),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),e.$refs.load&&e.$refs.load.hideToggle(),p.a.h5Toast("哎呀，网络走丢啦~",e);case 16:case"end":return t.stop()}},t,e,[[0,11]])}))()},queryAppointmentInfo:function(){var e=this;return d()(n.a.mark(function t(){var o,a,s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=l.a.queryAppointmentInfo,a={bookCode:e.bookCode},e.$refs.load&&e.$refs.load.showToggle(),t.next=6,p.a.ajax({url:o,data:a,type:"get",dataType:"json",timeout:"10000"});case 6:s=t.sent,e.$refs.load&&e.$refs.load.hideToggle(),s.success?(e.appointmentInfo=s.data,r={name:e.appointmentInfo.guideName,storeName:e.appointmentInfo.storeName,iconUrl:e.appointmentInfo.guidePhoto},e.share(r),e.appointmentInfo.bookingTime&&(e.appointmentInfo.bookingTime=p.a.formatYYYYMMDD(e.appointmentInfo.bookingTime))):p.a.h5Toast("哎呀，网络走丢啦~",e),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),e.$refs.load&&e.$refs.load.hideToggle(),p.a.h5Toast("哎呀，网络走丢啦~",e);case 16:case"end":return t.stop()}},t,e,[[0,11]])}))()},queryGuideOrderLog:function(){var e=this;return d()(n.a.mark(function t(){var a,s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=l.a.queryGuideOrderLog,s={bookCode:e.bookCode},e.$refs.load&&e.$refs.load.showToggle(),t.next=6,p.a.ajax({url:a,data:s,type:"get",dataType:"json",timeout:"10000"});case 6:if(r=t.sent,e.$refs.load&&e.$refs.load.hideToggle(),!r.success){t.next=16;break}if(!(r.data.length<1)){t.next=11;break}return t.abrupt("return");case 11:e.guideOrderLog=r.data.map(function(e,t){var o="";return e.createTime&&(e.createTime=p.a.formatDateTime(e.createTime)),1==e.orderStatus||8==e.orderStatus?o="预约成功！等待导购员电话回访":2==e.orderStatus?o="导购员已回访，恭候您到店":3==e.orderStatus||4==e.orderStatus?o="已到店，期待您的再次相约":7==e.orderStatus&&(o="您已取消预约，期待您的再次相约"),e.orderStatusWord=o,e}),1==e.guideOrderLog[0].orderStatus||8==e.guideOrderLog[0].orderStatus?(e.bookingWord="等待导购员确认",e.bookingWordInfo="如果错过了导购员的电话，可主动联系TA。",e.tipTextBackground="background: url("+o("fweY")+") no-repeat;background-size: 100% 100%;"):2==e.guideOrderLog[0].orderStatus?(e.bookingWord="恭候到店",e.bookingWordInfo="导购员已回访，期待您的光临！",e.tipTextBackground="background: url("+o("AXYi")+") no-repeat;background-size: 100% 100%;"):3==e.guideOrderLog[0].orderStatus||4==e.guideOrderLog[0].orderStatus||5==e.guideOrderLog[0].orderStatus||6==e.guideOrderLog[0].orderStatus?(e.bookingWord="已到店",e.bookingWordInfo="感谢您预约V购，期待您的再次相约！",e.tipTextBackground="background: url("+o("Y3PN")+") no-repeat;background-size: 100% 100%;"):7==e.guideOrderLog[0].orderStatus&&(e.bookingWord="已取消",e.bookingWordInfo="遗憾未能到店，何时再次相约？",e.tipTextBackground="background: url("+o("tDAQ")+") no-repeat;background-size: 100% 100%;"),e.showPage=!0,t.next=18;break;case 16:e.showPage=!0,p.a.h5Toast("哎呀，网络走丢啦~",e);case 18:t.next=26;break;case 20:t.prev=20,t.t0=t.catch(0),e.showPage=!0,e.$refs.load&&e.$refs.load.hideToggle(),p.a.h5Toast("哎呀，网络走丢啦~",e);case 26:case"end":return t.stop()}},t,e,[[0,20]])}))()}},created:function(){window.modelType=p.a.modelType(),this.modelType=window.modelType,this.chid=p.a.chidValue()},mounted:function(){this.headerConfig.showTips=p.a.checkWorkingTime();var e=p.a.getUrlArgs();this.bookCode=e.bookCode||"",this.cityId=e.cityId||"",this.isYunxin=e.isYunxin||"",this.guideId=e.guideId||"",this.channel=e.channel||"",this.queryAppointmentInfo(),this.queryGuideOrderLog()}},v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[3==e.modelType?[a("error-page")]:3!=e.modelType?[a("header-top",{attrs:{headerConfig:e.headerConfig}}),e._v(" "),e.showPage?[a("div",{attrs:{name:"","sap-modid":"mNSyo"}},[a("div",{staticClass:"tipText",style:e.tipTextBackground},[a("p",{staticClass:"tipText_h1"},[e._v(e._s(e.bookingWord))]),e._v(" "),a("p",{staticClass:"tipText_h2"},[e._v(e._s(e.bookingWordInfo))])]),e._v(" "),a("div",{staticClass:"details"},[a("div",{staticClass:"detailsSite"},[a("div",{staticClass:"phoneNum"},[a("i"),e._v(" "),a("span",{staticClass:"phoneNumName"},[e._v("预约手机：")]),e._v(" "),a("span",{staticClass:"phoneNumNameNum"},[e._v(e._s(e.appointmentInfo.custTele))])]),e._v(" "),a("div",{staticClass:"location"},[a("i"),e._v(" "),a("span",{staticClass:"locationName"},[e._v("门店地址：")]),e._v(" "),a("span",{staticClass:"locationNameNum"},[e._v(e._s(e.appointmentInfo.address))])])]),e._v(" "),a("div",{staticClass:"detailsMessage"},[a("div",{staticClass:"detailsMessageTop"},[a("div",{staticClass:"dMTName"},[a("span",[e._v(e._s(e.appointmentInfo.storeName))])]),e._v(" "),a("div",{staticClass:"dMTimg"},[a("div",{staticClass:"dMTtou"},[a("img",{attrs:{src:e.appointmentInfo.guidePhoto,width:"100%",height:"100%"}})]),e._v(" "),a("div",{staticClass:"dMTMess"},[a("p",{staticClass:"dMTText"},[a("span",{staticClass:"imgname"},[e._v(e._s(e.appointmentInfo.guideName))]),e._v(" "),a("span",{staticClass:"img"},[1==e.appointmentInfo.businessCode?a("img",{attrs:{src:o("sJSZ"),width:"100%",height:"100%"}}):2==e.appointmentInfo.businessCode?a("img",{attrs:{src:o("gx+g"),width:"100%",height:"100%"}}):e._e()])]),e._v(" "),a("p",{staticClass:"dMTData"},[a("span",[e._v("已预约")]),e._v(" "),a("i",[e._v(e._s(e.appointmentInfo.bookingTime))]),e._v(" "),a("span",[e._v("到店")])])])])]),e._v(" "),a("div",{staticClass:"detailsMessageBottom"},[a("dl",e._l(e.guideOrderLog,function(t,o){return 5!=t.orderStatus&&6!=t.orderStatus?a("div",{key:o,staticClass:"spot"},[a("dt",[a("p",{staticClass:"namet"},[e._v(e._s(t.orderStatusWord))]),e._v(" "),a("p",{staticClass:"nameb"},[e._v(e._s(t.createTime))])]),e._v(" "),o!=e.guideOrderLog.length-1?a("dd"):e._e()]):e._e()})),e._v(" "),a("div",{staticClass:"detailsMessageBottomhh"})])])]),e._v(" "),a("div",{staticClass:"btom_an"},[a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.guideOrderLog[0].orderStatus||1==e.guideOrderLog[0].orderStatus||8==e.guideOrderLog[0].orderStatus,expression:"guideOrderLog[0].orderStatus==2||guideOrderLog[0].orderStatus==1\n            ||guideOrderLog[0].orderStatus==8"},{name:"tap",rawName:"v-tap",value:e.cancelAppointmentPrompt,expression:"cancelAppointmentPrompt"}],staticClass:"sub_mess",attrs:{name:""}},[e._v("取消预约")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:36!=e.channel&&37!=e.channel&&1!=e.isYunxin,expression:"channel!=36&&channel!=37&&isYunxin!=1"},{name:"tap",rawName:"v-tap",value:e.goToYunxin,expression:"goToYunxin"}],staticClass:"sub_yu",attrs:{name:""}},[e._v("发消息")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.guideOrderLog[0].orderStatus||4==e.guideOrderLog[0].orderStatus||5==e.guideOrderLog[0].orderStatus||6==e.guideOrderLog[0].orderStatus||7==e.guideOrderLog[0].orderStatus&&1!=e.isYunxin,expression:"guideOrderLog[0].orderStatus==3||guideOrderLog[0].orderStatus==4||guideOrderLog[0].orderStatus==5\n            ||guideOrderLog[0].orderStatus==6||guideOrderLog[0].orderStatus==7&&isYunxin!=1"},{name:"tap",rawName:"v-tap",value:e.goToAppointmentStore,expression:"goToAppointmentStore"}],staticClass:"sub_yu",attrs:{name:""}},[e._v("再次预约")])]),e._v(" "),a("div",{staticClass:"hei-box"})])]:e._e(),e._v(" "),a("prompt",{ref:"prompt",attrs:{confirmBtnText:"取消预约",cancelBtnText:"不取消",text:e.msg,align:"center"},on:{confirm:e.confirmPrompt}}),e._v(" "),a("toast",{ref:"toast",attrs:{text:e.msg,align:"center"}}),e._v(" "),a("load",{ref:"load"}),e._v(" "),a("input",{attrs:{type:"hidden",id:"resourceType",value:"4k3"}}),e._v(" "),a("input",{attrs:{type:"hidden",id:"pagename"},domProps:{value:"pgtitle=预约详情页;lgid="+e.guideId+";ctid="+e.cityId+";actid=a0002;chid="+e.chid}})]:e._e()],2)},_=[],T={render:v,staticRenderFns:_},x=T,k=o("VU/8"),b=a,C=k(f,x,!1,b,null,null),I=C.exports;o("sVYa");s.a.config.productionTip=!1,new s.a({el:"#app",components:{appointmentDetails:I},template:"<appointmentDetails/>"})},tDAQ:function(e,t,o){e.exports=o.p+"static/vgo/img/status_book_cancel@2x.b1367e0.png"}},["s7HD"]);